{"version":3,"file":"feedback-king.js","sources":["../src/utils/dom.ts","../src/styles/modal.ts","../src/styles/success.ts","../src/components/Modal.ts","../src/index.ts"],"sourcesContent":["/**\n * ÂàõÂª∫ DOM ÂÖÉÁ¥†ÁöÑÂ∑•ÂÖ∑ÂáΩÊï∞\n */\ninterface CreateElementOptions {\n    className?: string;\n    innerHTML?: string;\n    attributes?: Record<string, string>;\n    styles?: Partial<CSSStyleDeclaration>;\n  }\n  \n  export function createElement(\n    tag: string,\n    options: CreateElementOptions = {}\n  ): HTMLElement {\n    const element = document.createElement(tag);\n    \n    // Ê∑ªÂä†Á±ªÂêç\n    if (options.className) {\n      element.className = options.className;\n    }\n    \n    // ËÆæÁΩÆ innerHTML\n    if (options.innerHTML) {\n      element.innerHTML = options.innerHTML;\n    }\n    \n    // Ê∑ªÂä†Â±ûÊÄß\n    if (options.attributes) {\n      Object.entries(options.attributes).forEach(([key, value]) => {\n        element.setAttribute(key, value);\n      });\n    }\n    \n    // Ê∑ªÂä†Ê†∑Âºè\n    if (options.styles) {\n      Object.assign(element.style, options.styles);\n    }\n    \n    return element;\n  }\n  \n  /**\n   * Ê∑ªÂä†Ê†∑ÂºèÂà∞È°µÈù¢\n   */\n  export function injectStyles(styles: string): void {\n    const styleElement = document.createElement('style');\n    styleElement.textContent = styles;\n    document.head.appendChild(styleElement);\n  }\n  \n  /**\n   * Ëé∑ÂèñÂÖÉÁ¥†ÁöÑÁªùÂØπ‰ΩçÁΩÆ\n   */\n  export function getElementPosition(element: HTMLElement): { top: number; left: number } {\n    const rect = element.getBoundingClientRect();\n    return {\n      top: rect.top + window.scrollY,\n      left: rect.left + window.scrollX\n    };\n  }\n  \n  /**\n   * Ê£ÄÊü•ÂÖÉÁ¥†ÊòØÂê¶Âú®ËßÜÂè£‰∏≠\n   */\n  export function isElementInViewport(element: HTMLElement): boolean {\n    const rect = element.getBoundingClientRect();\n    return (\n      rect.top >= 0 &&\n      rect.left >= 0 &&\n      rect.bottom <= window.innerHeight &&\n      rect.right <= window.innerWidth\n    );\n  }\n  \n  /**\n   * Èò≤ÊäñÂáΩÊï∞\n   */\n  export function debounce<T extends (...args: any[]) => any>(\n    func: T,\n    wait: number\n  ): (...args: Parameters<T>) => void {\n    let timeoutId: number | undefined;\n    \n    return function executedFunction(...args: Parameters<T>) {\n      const later = () => {\n        timeoutId = undefined;\n        func(...args);\n      };\n      \n      if (timeoutId !== undefined) {\n        clearTimeout(timeoutId);\n      }\n      \n      timeoutId = window.setTimeout(later, wait);\n    };\n  }","export const modalStyles = `\n    .feedback-modal {\n        position: fixed;\n        z-index: 10000;\n        right: 20px;\n        bottom: 20px;\n        width: 360px;\n        background: #2A2A2A;\n        border-radius: 16px;\n        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);\n        color: #fff;\n        opacity: 0;\n        transform: translateY(10px);\n        transition: opacity 0.2s ease, transform 0.2s ease;\n        display: none;\n    }\n\n    .feedback-modal-content {\n        padding: 20px;  \n    }\n\n    .feedback-modal-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 16px;\n    }\n\n    .feedback-modal-header h3 {\n        margin: 0;\n        font-size: 20px;\n        font-weight: 500;\n    }\n\n    .feedback-close {\n        background: none;\n        border: none;\n        color: #fff;\n        font-size: 24px;\n        cursor: pointer;\n        padding: 0;\n        opacity: 0.7;\n    }\n\n    .feedback-close:hover {\n        opacity: 1;\n    }\n\n    .feedback-types {\n        display: flex;\n        gap: 8px;\n        margin-bottom: 16px;\n    }\n\n    .feedback-type-btn {\n        flex: 1;\n        padding: 8px;\n        border: none;\n        border-radius: 8px;\n        background: rgba(255, 255, 255, 0.1);\n        color: #fff;\n        cursor: pointer;\n        transition: background-color 0.2s;\n    }\n\n    .feedback-type-btn:hover {\n        background: rgba(255, 255, 255, 0.2);\n    }\n\n    .feedback-type-btn.active {\n        background: #6E56CF;\n    }\n\n    .feedback-input {\n        width: 100%;\n        padding: 12px;\n        border: 1px solid rgba(255, 255, 255, 0.1);\n        border-radius: 8px;\n        background: rgba(255, 255, 255, 0.05);\n        color: #fff;\n        font-size: 14px;\n        margin-top: 12px;\n        margin-bottom: 12px;\n    }\n\n    .feedback-input::placeholder {\n        color: rgba(255, 255, 255, 0.5);\n    }\n\n    .feedback-textarea {\n        width: 100%;\n        padding: 12px;\n        border: 1px solid rgba(255, 255, 255, 0.1);\n        border-radius: 8px;\n        background: rgba(255, 255, 255, 0.05);\n        color: #fff;\n        font-size: 14px;\n        resize: none;\n        margin-top: 12px;\n        margin-bottom: 12px;\n    }\n\n    .feedback-textarea::placeholder {\n        color: rgba(255, 255, 255, 0.5);\n    }\n\n    .feedback-submit {\n        width: 100%;\n        padding: 12px;\n        border: none;\n        border-radius: 8px;\n        background: #6E56CF;\n        color: #fff;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: background-color 0.2s;\n    }\n\n    .feedback-submit:hover {\n        background: #5B46B0;\n    }\n\n    .feedback-powered {\n        text-align: center;\n        font-size: 12px;\n        color: rgba(255, 255, 255, 0.5);\n        margin-top: 12px;\n    }\n\n    .feedback-error {\n        color: #ff4d4f;\n        font-size: 12px;\n        margin-bottom: 12px;\n        display: none;\n    }\n\n    .feedback-error.show {\n        display: block;\n    }\n\n    .feedback-input.error {\n        border-color: #ff4d4f;\n    }\n`;\n","export const successStyles = `\n    .feedback-success {\n        text-align: center;\n        padding: 40px 20px;\n    }\n\n    .feedback-checkmark {\n        font-size: 48px;\n        color: #6E56CF;\n        margin-bottom: 16px;\n    }\n\n    .feedback-success h3 {\n        margin: 0;\n        font-size: 20px;\n        font-weight: 500;\n        margin-bottom: 16px;\n    }\n`;\n","import { FeedbackConfig, FeedbackData } from \"../config\";\nimport { createElement } from \"../utils/dom\";\nimport { modalStyles, successStyles } from \"../styles\";\n\nexport class FeedbackModal {\n  private element: HTMLElement;\n  private successElement: HTMLElement;\n  private config: FeedbackConfig;\n  private selectedType: string = \"issue\";\n\n  constructor(config: FeedbackConfig) {\n    this.config = config;\n    this.injectStyles();\n    this.element = this.createModal();\n    this.bindEvents();\n\n    this.successElement = createElement(\"div\", {\n      className: \"feedback-success\",\n      innerHTML: `\n        <div class=\"feedback-checkmark\">‚úì</div>\n        <h3>Thanks for your feedback!</h3>\n      `,\n    });\n  }\n\n  private getModalHTML(): string {\n    return `\n      <div class=\"feedback-modal-header\">\n        <h3>Feedback some questions</h3>\n        <button class=\"feedback-close\">&times;</button>\n      </div>\n      <div class=\"feedback-modal-body\">\n        <div class=\"feedback-types\">\n          <button class=\"feedback-type-btn\" data-type=\"issue\">\n            ‚ùó Issue\n          </button>\n          <button class=\"feedback-type-btn active\" data-type=\"idea\">\n            üí° Idea\n          </button>\n          <button class=\"feedback-type-btn\" data-type=\"other\">\n            üí≠ Other\n          </button>\n        </div>\n        <div class=\"feedback-form\">\n          <div>Short title</div>\n          <input type=\"text\" class=\"feedback-input feedback-title\" placeholder=\"The text is wrong\" />\n          <div class=\"feedback-error\" data-error=\"title\">Please enter a title</div>\n          <div>Description</div>\n          <textarea\n            class=\"feedback-textarea\" \n            placeholder=\"I want to say...\"\n            rows=\"4\"\n          ></textarea>\n          <button class=\"feedback-submit\">Send</button>\n        </div>\n        <div class=\"feedback-powered\">\n          Powered by HJ\n        </div>\n      </div>\n    `;\n  }\n\n  private createModal(): HTMLElement {\n    const modal = createElement(\"div\", {\n      className: \"feedback-modal\",\n      innerHTML: `\n        <div class=\"feedback-modal-content\">\n        ${this.getModalHTML()}\n        </div>\n      `,\n    });\n\n    modal.style.display = \"none\";\n    return modal;\n  }\n\n  private bindEvents(): void {\n    // ÂÖ≥Èó≠ÊåâÈíÆ\n    const closeBtn = this.element.querySelector(\".feedback-close\");\n    closeBtn?.addEventListener(\"click\", () => this.hide());\n\n    // Á±ªÂûãÂàáÊç¢\n    const typeButtons = this.element.querySelectorAll(\".feedback-type-btn\");\n    typeButtons.forEach((btn) => {\n      btn.addEventListener(\"click\", (e) => {\n        const target = e.target as HTMLElement;\n        const type = target.dataset.type;\n        if (type) {\n          this.selectedType = type;\n          typeButtons.forEach((b) => b.classList.remove(\"active\"));\n          target.classList.add(\"active\");\n        }\n      });\n    });\n\n    // ÁõëÂê¨Ê†áÈ¢òËæìÂÖ•\n    const titleInput = this.element.querySelector(\n      \".feedback-input\"\n    ) as HTMLInputElement;\n    titleInput?.addEventListener(\"input\", (e) => {\n      const target = e.target as HTMLInputElement;\n      if (target.value.trim() && this.hasError(\"title\")) {\n        this.hideError(\"title\");\n      }\n    });\n\n    // Êèê‰∫§ÊåâÈíÆ\n    const submitBtn = this.element.querySelector(\".feedback-submit\");\n    submitBtn?.addEventListener(\"click\", () => this.handleSubmit());\n  }\n\n  private hasError(field: string): boolean {\n    const errorElement = this.element.querySelector(`[data-error=\"${field}\"]`);\n    return errorElement?.classList.contains(\"show\") || false;\n  }\n\n  private showError(field: string): void {\n    const errorElement = this.element.querySelector(`[data-error=\"${field}\"]`);\n    const inputElement = this.element.querySelector(`.feedback-${field}`);\n\n    if (errorElement && inputElement) {\n      errorElement.classList.add(\"show\");\n      inputElement.classList.add(\"error\");\n    }\n  }\n\n  private hideError(field: string): void {\n    const errorElement = this.element.querySelector(`[data-error=\"${field}\"]`);\n    const inputElement = this.element.querySelector(`.feedback-${field}`);\n\n    if (errorElement && inputElement) {\n      errorElement.classList.remove(\"show\");\n      inputElement.classList.remove(\"error\");\n    }\n  }\n\n  private async handleSubmit(): Promise<void> {\n    const titleInput = this.element.querySelector(\n      \".feedback-input\"\n    ) as HTMLInputElement;\n    const titleValue = titleInput.value.trim();\n\n    const textarea = this.element.querySelector(\n      \".feedback-textarea\"\n    ) as HTMLTextAreaElement;\n    const message = textarea.value.trim();\n    if (!titleValue) {\n      this.showError(\"title\");\n      return;\n    }\n\n    const submitBtn = this.element.querySelector(\n      \".feedback-submit\"\n    ) as HTMLButtonElement;\n    submitBtn.disabled = true;\n    submitBtn.textContent = \"Submitting...\";\n\n    const deviceInfo = this.getDeviceInfo();\n    const pageInfo = window.location.href;\n\n    const feedback: FeedbackData = {\n      type: this.selectedType as \"issue\" | \"idea\" | \"other\",\n      title: titleValue,\n      message,\n      metadata: {\n        device: deviceInfo,\n        page: pageInfo,\n      },\n      timestamp: Date.now(),\n    };\n    try {\n      // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†ÊÇ®ÁöÑÈªòËÆ§Êèê‰∫§ÈÄªËæë\n      const response = await fetch(\"ÊÇ®ÁöÑAPIÁ´ØÁÇπ\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          projectId: this.config.projectId,\n          ...feedback,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Êèê‰∫§Â§±Ë¥•\");\n      }\n      const modalContent = this.element.querySelector(\n        \".feedback-modal-content\"\n      );\n      if (modalContent) {\n        // ‰ΩøÁî® DOM ÁºìÂ≠òÂíåÊòæÁ§∫/ÈöêËóèÂàáÊç¢ÔºåËÄå‰∏çÊòØÈáçÂª∫\n        modalContent.firstElementChild?.classList.add(\"hide\");\n        modalContent.appendChild(this.successElement);\n\n        setTimeout(() => {\n          this.hide();\n          modalContent.firstElementChild?.classList.remove(\"hide\");\n          this.successElement.remove();\n          titleInput.value = \"\";\n          textarea.value = \"\";\n        }, 2000);\n      }\n    } catch (error) {\n      console.error(\"Failed to submit feedback:\", error);\n    } finally {\n      submitBtn.disabled = false;\n      submitBtn.textContent = \"Send\";\n    }\n  }\n\n  private getDeviceInfo(): string {\n    const userAgent = navigator.userAgent;\n    const browserInfo = this.getBrowserInfo(userAgent);\n    const osInfo = this.getOSInfo(userAgent);\n\n    return `${browserInfo.name} ${browserInfo.version}, ${osInfo.name} ${osInfo.version}`;\n  }\n\n  private getBrowserInfo(ua: string): { name: string; version: string } {\n    if (/Chrome\\/([0-9.]+)/.test(ua)) {\n      const version = ua.match(/Chrome\\/([0-9.]+)/)?.[1] || \"\";\n      if (/Edg\\//.test(ua)) {\n        return { name: \"Edge\", version };\n      }\n      return { name: \"Chrome\", version };\n    }\n    if (/Firefox\\/([0-9.]+)/.test(ua)) {\n      const version = ua.match(/Firefox\\/([0-9.]+)/)?.[1] || \"\";\n      return { name: \"Firefox\", version };\n    }\n    if (/Safari\\/([0-9.]+)/.test(ua) && /Version\\/([0-9.]+)/.test(ua)) {\n      const version = ua.match(/Version\\/([0-9.]+)/)?.[1] || \"\";\n      return { name: \"Safari\", version };\n    }\n    if (/MSIE|Trident/.test(ua)) {\n      const version = ua.match(/(?:MSIE |rv:)(\\d+(\\.\\d+)?)/)?.[1] || \"\";\n      return { name: \"Internet Explorer\", version };\n    }\n\n    return { name: \"Unknown\", version: \"\" };\n  }\n\n  private getOSInfo(ua: string): { name: string; version: string } {\n    if (/Windows NT ([0-9.]+)/.test(ua)) {\n      const version = ua.match(/Windows NT ([0-9.]+)/)?.[1] || \"\";\n      return { name: \"Windows\", version };\n    }\n    if (/Mac OS X ([0-9._]+)/.test(ua)) {\n      const version = (ua.match(/Mac OS X ([0-9._]+)/)?.[1] || \"\").replace(\n        /_/g,\n        \".\"\n      );\n      return { name: \"macOS\", version };\n    }\n    if (/Android ([0-9.]+)/.test(ua)) {\n      const version = ua.match(/Android ([0-9.]+)/)?.[1] || \"\";\n      return { name: \"Android\", version };\n    }\n    if (/Linux/.test(ua)) {\n      return { name: \"Linux\", version: \"\" };\n    }\n\n    return { name: \"Unknown\", version: \"\" };\n  }\n\n  public mount(): void {\n    document.body.appendChild(this.element);\n  }\n\n  public show(): void {\n    this.element.style.display = \"block\";\n    requestAnimationFrame(() => {\n      this.element.style.opacity = \"1\";\n      this.element.style.transform = \"translateY(0)\";\n    });\n  }\n\n  public hide(): void {\n    this.element.style.display = \"none\";\n    this.element.style.transform = \"translateY(10px)\";\n    setTimeout(() => {\n      this.element.style.display = \"none\";\n    }, 200);\n  }\n\n  private injectStyles(): void {\n    const styleElement = document.createElement(\"style\");\n    styleElement.textContent = `\n      ${modalStyles}\n      ${successStyles}\n    `;\n    document.head.appendChild(styleElement);\n  }\n}\n","import { FeedbackModal } from \"./components/Modal\";\nimport { FeedbackConfig } from \"./config\";\n\nclass FeedbackKing {\n  private config: FeedbackConfig;\n  private modal: FeedbackModal | null = null;\n\n  constructor(config: Partial<FeedbackConfig>) {\n    const scriptTag = document.currentScript as HTMLScriptElement;\n    const urlParams = new URLSearchParams(scriptTag?.src.split(\"?\")[1] || \"\");\n    const fidFromScript = urlParams.get(\"fid\");\n\n    this.config = {\n      projectId: fidFromScript || config.projectId,\n    } as FeedbackConfig;\n    this.validateConfig();\n    this.init();\n  }\n\n  private validateConfig(): void {\n    if (!this.config.projectId) {\n      throw new Error(\"FeedbackKing: projectId is required\");\n    }\n  }\n\n  private init(): void {\n    // ÁõëÂê¨ÊâìÂºÄ Modal ‰∫ã‰ª∂\n    document.addEventListener(\"click\", (e) => {\n      const target = e.target as HTMLElement;\n      if (target.matches(\"[data-feedback-king-button]\")) {\n        this.showModal();\n      }\n    });\n  }\n\n  private showModal(): void {\n    // ÊáíÂä†ËΩΩÔºöÂè™Âú®Á¨¨‰∏ÄÊ¨°ÁÇπÂáªÊó∂ÂàõÂª∫ÂíåÊåÇËΩΩÊ®°ÊÄÅÊ°Ü\n    if (!this.modal) {\n      this.modal = new FeedbackModal(this.config);\n      this.modal.mount();\n    }\n    this.modal.show();\n  }\n}\n\n// Á°Æ‰øùÂØºÂá∫Âà∞ÂÖ®Â±Ä\nif (typeof window !== \"undefined\") {\n  (window as any).FeedbackKing = FeedbackKing;\n}\n\nexport default FeedbackKing;\n"],"names":[],"mappings":"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"}